import{_ as a,c as i,o as e,a2 as n}from"./chunks/framework.Bj-1CPTZ.js";const k=JSON.parse('{"title":"Models Overview","description":"","frontmatter":{},"headers":[],"relativePath":"api-reference/models/index.md","filePath":"api-reference/models/index.md","lastUpdated":1767998922000}'),t={name:"api-reference/models/index.md"};function l(o,s,d,r,p,h){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="models-overview" tabindex="-1">Models Overview <a class="header-anchor" href="#models-overview" aria-label="Permalink to &quot;Models Overview&quot;">​</a></h1><p>Domain models represent the core business entities in Centabit v0.5. All models use the Freezed package for immutability, equality, and JSON serialization.</p><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h2><p>Models live in the <strong>domain layer</strong> and are separate from database entities:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Database (Drift entities) → Repositories → Domain Models → Cubits → UI</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Key Principles:</strong></p><ul><li><strong>Immutable</strong>: All models use <code>@freezed</code> for immutability</li><li><strong>Type-safe</strong>: Full type checking at compile time</li><li><strong>JSON-ready</strong>: Auto-generated serialization with <code>@JsonSerializable</code></li><li><strong>UUID-based</strong>: All entities use UUID v4 for primary keys</li><li><strong>Timestamped</strong>: All entities track <code>createdAt</code> and <code>updatedAt</code></li></ul><h2 id="core-models" tabindex="-1">Core Models <a class="header-anchor" href="#core-models" aria-label="Permalink to &quot;Core Models&quot;">​</a></h2><h3 id="transactionmodel" tabindex="-1"><a href="./transaction-model">TransactionModel</a> <a class="header-anchor" href="#transactionmodel" aria-label="Permalink to &quot;[TransactionModel](./transaction-model.md)&quot;">​</a></h3><p>Represents a financial transaction (debit or credit).</p><p><strong>Key Fields:</strong></p><ul><li><code>id</code>, <code>name</code>, <code>amount</code>, <code>transactionDate</code></li><li><code>type</code> (enum: <code>credit</code> | <code>debit</code>)</li><li><code>categoryId</code> (nullable - links to category)</li><li><code>budgetId</code> (nullable - links to budget or unassigned)</li><li><code>notes</code> (optional description)</li></ul><p><strong>Factory Constructors:</strong></p><ul><li><code>TransactionModel.create()</code> - Auto-generates ID and timestamps</li><li><code>TransactionModel.fromJson()</code> - Deserializes from JSON</li></ul><h3 id="budgetmodel" tabindex="-1"><a href="./budget-model">BudgetModel</a> <a class="header-anchor" href="#budgetmodel" aria-label="Permalink to &quot;[BudgetModel](./budget-model.md)&quot;">​</a></h3><p>Represents a budget period with spending limit and date range.</p><p><strong>Key Fields:</strong></p><ul><li><code>id</code>, <code>name</code>, <code>amount</code></li><li><code>startDate</code>, <code>endDate</code> (defines budget period)</li><li>Used for BAR (Budget Adherence Ratio) calculations</li></ul><p><strong>Extension Methods:</strong></p><ul><li><code>isActive()</code> - Checks if budget is currently active</li><li><code>totalDays()</code> - Calculates period length</li><li><code>elapsedDays()</code> - Calculates days elapsed</li><li><code>withUpdatedTimestamp()</code> - Creates copy with updated timestamp</li></ul><h3 id="categorymodel" tabindex="-1"><a href="./category-model">CategoryModel</a> <a class="header-anchor" href="#categorymodel" aria-label="Permalink to &quot;[CategoryModel](./category-model.md)&quot;">​</a></h3><p>Represents a spending category (e.g., Groceries, Dining, Transport).</p><p><strong>Key Fields:</strong></p><ul><li><code>id</code>, <code>name</code></li><li><code>iconName</code> (links to app icon assets)</li></ul><p><strong>Usage:</strong></p><ul><li>Linked from transactions via <code>categoryId</code></li><li>Linked from allocations via <code>categoryId</code></li><li>Denormalized in view models for UI display</li></ul><h3 id="allocationmodel" tabindex="-1"><a href="./allocation-model">AllocationModel</a> <a class="header-anchor" href="#allocationmodel" aria-label="Permalink to &quot;[AllocationModel](./allocation-model.md)&quot;">​</a></h3><p>Represents budget allocation to a specific category.</p><p><strong>Key Fields:</strong></p><ul><li><code>id</code>, <code>amount</code></li><li><code>categoryId</code> (which category)</li><li><code>budgetId</code> (which budget)</li></ul><p><strong>Relationships:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Budget (1) ──&lt; (N) Allocations ──&gt; (1) Category</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Extension Methods:</strong></p><ul><li><code>withUpdatedTimestamp()</code> - Creates copy with updated timestamp</li><li><code>isValidAmount()</code> - Validates amount is positive</li></ul><p><strong>List Extensions:</strong></p><ul><li><code>totalAmount()</code> - Sum of all allocation amounts</li><li><code>groupByCategory()</code> - Groups by category ID</li><li><code>groupByBudget()</code> - Groups by budget ID</li><li><code>forBudget()</code> - Filters by budget ID</li><li><code>forCategory()</code> - Filters by category ID</li></ul><h2 id="model-naming-convention" tabindex="-1">Model Naming Convention <a class="header-anchor" href="#model-naming-convention" aria-label="Permalink to &quot;Model Naming Convention&quot;">​</a></h2><p>All domain models follow these conventions:</p><p><strong>File naming:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>lib/data/models/[entity]_model.dart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Class naming:</strong></p><div class="language-dart vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@freezed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _$[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ ... }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Examples:</strong></p><ul><li><code>TransactionModel</code> in <code>transaction_model.dart</code></li><li><code>BudgetModel</code> in <code>budget_model.dart</code></li><li><code>CategoryModel</code> in <code>category_model.dart</code></li><li><code>AllocationModel</code> in <code>allocation_model.dart</code></li></ul><h2 id="code-generation" tabindex="-1">Code Generation <a class="header-anchor" href="#code-generation" aria-label="Permalink to &quot;Code Generation&quot;">​</a></h2><p>Models use Freezed code generation. After modifying a model:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flutter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build_runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --delete-conflicting-outputs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Generated Files</strong> (do not edit manually):</p><ul><li><code>[model].freezed.dart</code> - Freezed implementations</li><li><code>[model].g.dart</code> - JSON serialization</li></ul><h2 id="common-patterns" tabindex="-1">Common Patterns <a class="header-anchor" href="#common-patterns" aria-label="Permalink to &quot;Common Patterns&quot;">​</a></h2><h3 id="factory-constructor-pattern" tabindex="-1">Factory Constructor Pattern <a class="header-anchor" href="#factory-constructor-pattern" aria-label="Permalink to &quot;Factory Constructor Pattern&quot;">​</a></h3><p>All models provide a <code>.create()</code> factory for new instances:</p><div class="language-dart vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Auto-generates ID and timestamps</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> transaction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TransactionModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Grocery Shopping&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 45.50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TransactionType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.debit,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  categoryId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> groceryCategoryId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="copywith-pattern" tabindex="-1">CopyWith Pattern <a class="header-anchor" href="#copywith-pattern" aria-label="Permalink to &quot;CopyWith Pattern&quot;">​</a></h3><p>Freezed provides immutable updates via <code>copyWith()</code>:</p><div class="language-dart vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Update amount without mutating original</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> updated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> transaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50.00</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="json-serialization" tabindex="-1">JSON Serialization <a class="header-anchor" href="#json-serialization" aria-label="Permalink to &quot;JSON Serialization&quot;">​</a></h3><p>All models support JSON serialization:</p><div class="language-dart vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Serialize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> transaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Deserialize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> restored </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TransactionModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(json);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="domain-vs-database-models" tabindex="-1">Domain vs Database Models <a class="header-anchor" href="#domain-vs-database-models" aria-label="Permalink to &quot;Domain vs Database Models&quot;">​</a></h2><p><strong>Domain Models</strong> (this section):</p><ul><li>Used in business logic and UI</li><li>Clean, simple data classes</li><li>No sync metadata or user IDs</li></ul><p><strong>Database Entities</strong> (Drift):</p><ul><li>Used in local storage layer</li><li>Include sync fields: <code>isSynced</code>, <code>isDeleted</code>, <code>lastSyncedAt</code></li><li>Include <code>userId</code> for multi-user support</li></ul><p><strong>Transformation:</strong> Repositories handle conversion between domain and database models:</p><div class="language-dart vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// In TransactionRepository</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TransactionModel</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _mapToModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbTransaction) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TransactionModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbTransaction.id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbTransaction.name,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dbTransaction.amount,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... (excludes userId, isSynced, etc.)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="./transaction-model">TransactionModel →</a> - Transaction details</li><li><a href="./budget-model">BudgetModel →</a> - Budget details</li><li><a href="./category-model">CategoryModel →</a> - Category details</li><li><a href="./allocation-model">AllocationModel →</a> - Allocation details</li></ul><p>See also:</p><ul><li><a href="./../repositories/">Repositories →</a> - Data access layer</li><li><a href="./../cubits/">Cubits →</a> - State management</li></ul>`,70)])])}const g=a(t,[["render",l]]);export{k as __pageData,g as default};
